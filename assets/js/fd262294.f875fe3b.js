"use strict";(self.webpackChunk_clean_stack_source=self.webpackChunk_clean_stack_source||[]).push([[9186],{6866:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"platform-features/infrastructure","title":"Infrastructure Setup","description":"Clean Stack provides pre-configured Docker Compose setups for all platform components in the PLATFORM_SETUP directory.","source":"@site/docs/platform-features/infrastructure.md","sourceDirName":"platform-features","slug":"/platform-features/infrastructure","permalink":"/docs/platform-features/infrastructure","draft":false,"unlisted":false,"editUrl":"https://github.com/ersanyamarya/clean-stack/tree/main/apps/clean-docs/docs/platform-features/infrastructure.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Platform Features Implementation","permalink":"/docs/platform-features/implementation"},"next":{"title":"Telemetry Implementation","permalink":"/docs/platform-features/telemetry"}}');var o=s(4848),t=s(8453);const i={sidebar_position:4},a="Infrastructure Setup",l={},c=[{value:"Observability Stack",id:"observability-stack",level:2},{value:"Components",id:"components",level:3},{value:"Configuration Example",id:"configuration-example",level:3},{value:"Cache Stack",id:"cache-stack",level:2},{value:"Components",id:"components-1",level:3},{value:"Configuration Example",id:"configuration-example-1",level:3},{value:"MongoDB Stack",id:"mongodb-stack",level:2},{value:"Components",id:"components-2",level:3},{value:"Configuration Example",id:"configuration-example-2",level:3},{value:"Development Commands",id:"development-commands",level:2},{value:"Infrastructure Best Practices",id:"infrastructure-best-practices",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"infrastructure-setup",children:"Infrastructure Setup"})}),"\n",(0,o.jsxs)(n.p,{children:["Clean Stack provides pre-configured Docker Compose setups for all platform components in the ",(0,o.jsx)(n.code,{children:"PLATFORM_SETUP"})," directory."]}),"\n",(0,o.jsx)(n.h2,{id:"observability-stack",children:"Observability Stack"}),"\n",(0,o.jsxs)(n.p,{children:["Located in ",(0,o.jsx)(n.code,{children:"PLATFORM_SETUP/observability_stack"}),":"]}),"\n",(0,o.jsx)(n.h3,{id:"components",children:"Components"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"OpenTelemetry Collector"}),"\n",(0,o.jsx)(n.li,{children:"Prometheus for metrics"}),"\n",(0,o.jsx)(n.li,{children:"Loki for logs"}),"\n",(0,o.jsx)(n.li,{children:"Tempo for traces"}),"\n",(0,o.jsx)(n.li,{children:"Grafana for visualization"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"configuration-example",children:"Configuration Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'version: \'3.8\'\nservices:\n  otel-collector:\n    image: otel/opentelemetry-collector-contrib\n    ports:\n      - "4317:4317"  # OTLP gRPC\n      - "4318:4318"  # OTLP HTTP\n    volumes:\n      - ./config/otel-collector-config.yml:/etc/otelcol/config.yaml\n\n  prometheus:\n    image: prom/prometheus\n    ports:\n      - "9090:9090"\n    volumes:\n      - ./config/prometheus.yml:/etc/prometheus/prometheus.yml\n      - prometheus_data:/prometheus\n\n  grafana:\n    image: grafana/grafana\n    ports:\n      - "3000:3000"\n    volumes:\n      - ./config/grafana.ini:/etc/grafana/grafana.ini\n      - ./config/datasources.yml:/etc/grafana/provisioning/datasources/datasources.yml\n'})}),"\n",(0,o.jsx)(n.h2,{id:"cache-stack",children:"Cache Stack"}),"\n",(0,o.jsxs)(n.p,{children:["Located in ",(0,o.jsx)(n.code,{children:"PLATFORM_SETUP/cache_stack"}),":"]}),"\n",(0,o.jsx)(n.h3,{id:"components-1",children:"Components"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Redis for caching and rate limiting"}),"\n",(0,o.jsx)(n.li,{children:"Redis Commander for management UI"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"configuration-example-1",children:"Configuration Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'version: \'3.8\'\nservices:\n  redis:\n    image: redis:alpine\n    ports:\n      - "6379:6379"\n    volumes:\n      - redis_data:/data\n    command: redis-server --appendonly yes\n\n  redis-commander:\n    image: rediscommander/redis-commander\n    ports:\n      - "8081:8081"\n    environment:\n      - REDIS_HOSTS=local:redis:6379\n'})}),"\n",(0,o.jsx)(n.h2,{id:"mongodb-stack",children:"MongoDB Stack"}),"\n",(0,o.jsxs)(n.p,{children:["Located in ",(0,o.jsx)(n.code,{children:"PLATFORM_SETUP/mongo_stack"}),":"]}),"\n",(0,o.jsx)(n.h3,{id:"components-2",children:"Components"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"MongoDB database"}),"\n",(0,o.jsx)(n.li,{children:"Mongo Express UI"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"configuration-example-2",children:"Configuration Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'version: \'3.8\'\nservices:\n  mongodb:\n    image: mongo\n    ports:\n      - "27017:27017"\n    volumes:\n      - mongodb_data:/data/db\n    environment:\n      - MONGO_INITDB_ROOT_USERNAME=admin\n      - MONGO_INITDB_ROOT_PASSWORD=password\n\n  mongo-express:\n    image: mongo-express\n    ports:\n      - "8082:8081"\n    environment:\n      - ME_CONFIG_MONGODB_SERVER=mongodb\n      - ME_CONFIG_MONGODB_AUTH_USERNAME=admin\n      - ME_CONFIG_MONGODB_AUTH_PASSWORD=password\n'})}),"\n",(0,o.jsx)(n.h2,{id:"development-commands",children:"Development Commands"}),"\n",(0,o.jsx)(n.p,{children:"Start all platform services:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"bun run platform:all\n"})}),"\n",(0,o.jsx)(n.p,{children:"Individual stack controls:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Start/stop observability stack\n./tools/shell_scripts/observability-stack.sh up\n./tools/shell_scripts/observability-stack.sh down\n\n# Start/stop cache stack\n./tools/shell_scripts/cache-stack.sh up\n./tools/shell_scripts/cache-stack.sh down\n\n# Start/stop MongoDB stack\n./tools/shell_scripts/mongo-stack.sh up\n./tools/shell_scripts/mongo-stack.sh down\n"})}),"\n",(0,o.jsx)(n.h2,{id:"infrastructure-best-practices",children:"Infrastructure Best Practices"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Data Persistence"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Use named volumes for data storage"}),"\n",(0,o.jsx)(n.li,{children:"Configure appropriate backup strategies"}),"\n",(0,o.jsx)(n.li,{children:"Monitor disk usage"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Security"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Change default passwords"}),"\n",(0,o.jsx)(n.li,{children:"Use environment variables for secrets"}),"\n",(0,o.jsx)(n.li,{children:"Configure proper network isolation"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Resource Management"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Set appropriate memory limits"}),"\n",(0,o.jsx)(n.li,{children:"Monitor container health"}),"\n",(0,o.jsx)(n.li,{children:"Scale services as needed"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Development Workflow"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Use consistent port mappings"}),"\n",(0,o.jsx)(n.li,{children:"Maintain documentation"}),"\n",(0,o.jsx)(n.li,{children:"Version control configurations"}),"\n"]}),"\n"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>a});var r=s(6540);const o={},t=r.createContext(o);function i(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);